{% extends "teleforma/course_detail.html" %}
{% load telemeta_utils %}
{% load teleforma_tags %}
{% load i18n %}
{% load thumbnail %}

{% block extra_javascript %} 
<script type="text/javascript">
$(document).ready(function(){
    InitChatWindow("{% url jqchat_ajax room.id %}", null);
    $('#my_video_1').bind('contextmenu',function() { return false; });
    });
</script>

{% if user.is_staff %}
<script type="text/javascript">
    var mediaUtils = {
        publish : function(id){
            var p = jQuery('#publish');
            json([id],'teleforma.publish_media',function(){
                p.removeClass('icon_delete').addClass('icon_ok')
                p.html('{% trans " published" %}')
                });
         },
        unpublish : function(id){
            var p = jQuery('#publish');
            json([id],'teleforma.unpublish_media',function(){
                p.removeClass('icon_ok').addClass('icon_delete')
                p.html('{% trans " rejected" %}')
                });
         }
        }

    jQuery(window).ready(function(){
        var p = jQuery('#publish');
        var f = mediaUtils;
        p.unbind('click').click(function() {
            if (p.hasClass('icon_ok')){
                f.unpublish('{{media.id}}');
                return false;
                }
            if (p.hasClass('icon_delete')) {
                f.publish('{{media.id}}');
                return false;
                }
            }
            );
        });
</script>
{% endif %}

{% block supra_javascript %}
{% endblock supra_javascript %}

{% endblock extra_javascript %}


{% block course %}

{% block media %}
{% endblock media %}

{% block general_info %}
<div class="course_content" id="media_infos">
<dl class="listing">

{% if media.conference %}
<dt>{% trans "Course" %}</dt><dd><a href="{% url teleforma-desk-period-course period.id course.id %}">{{ media.course.title }} - {{ media.course_type }}</a></dd>
<dt>{% trans "Session" %}</dt><dd>{{ media.conference.session }}</dd>
{% if media.conference.professor %}
<dt>{% trans "Professor" %}</dt>
    <dd><a href="{% url telemeta-profile-detail media.conference.professor.user.username %}" target="_blank">{{ media.conference.professor }}</a></dd>
{% endif %}
{% if media.conference.comment %}<dt>{% trans "Comment" %}</dt><dd>{{ media.conference.comment }}</dd>{% endif %}
<dt>{% trans "Begin date" %}</dt><dd>{{ media.conference.date_begin }}</dd>
<dt>{% trans "End date" %}</dt><dd>{{ media.conference.date_end }}</dd>
{% if media.conference.room %}<dt>{% trans "Room" %}</dt><dd>{{ media.conference.room }}</dd>{% endif %}
{% if user.is_staff or user.is_superuser %}
<dt>{% trans "Mime type" %}</dt><dd>{{ media.mime_type }}</dd>
<dt>{% trans "Date added" %}</dt><dd>{{ media.date_added }}</dd>
<dt>{% trans "Date modified" %}</dt><dd>{{ media.date_modified }}</dd>
<dt>{% trans "Media ID" %}</dt><dd>{{ media.id }}</dd>
<dt>{% trans "Conference ID" %}</dt><dd>{{ media.conference.public_id }}</dd>
{% endif %}
{% endif %}

</dl>
</div>

{% endblock general_info %}

</div>
{% endblock course %}

