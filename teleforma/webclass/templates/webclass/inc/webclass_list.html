{% load teleforma_tags %}
{% load i18n %}

{% if webclass_slot %}
<div class="course_content content_video">
<div class="course_subtitle">
    <h3><img src="/static/telemeta/images/item_title.png" width="10px" alt="" /> Webclass live</h3>
</div>
    <table class="listing" width="100%">
    <tbody>
        {% if webclass_slot %}
        <tr>
            <td>
            <p>Vous êtes inscrit pour les webconférence du 
            <strong>{{webclass_slot.get_day_display}} de 
            {{webclass_slot.start_hour|date:"H\hi"}} à 
            {{webclass_slot.end_hour|date:"H\hi"}}</strong> 
            avec le professeur <strong>{{webclass_slot.professor.user.last_name}}</strong>.</p>
            {{webclass_slot.status}}
            {% if webclass_slot.status == 'past' %}
                <p>La webconférence est terminée.</p>
            {% elif webclass_slot.status == 'ingoing' %}
                <p>La webconférence est en cours.</p>
                <a href="{% url teleforma-webclass-join webclass_slot.id %}" target="_blank" class="conference-big-button component_icon button icon_next">Cliquez ici pour rejoindre la conférence</a>
            {% elif webclass_slot.status == 'almost' %}
                <p>Le webconférence est accessible mais elle n'a pas encore démarré.</p>
                <a href="{% url teleforma-webclass-join webclass_slot.id %}" target="_blank" class="conference-big-button component_icon button icon_next">Cliquez ici pour rejoindre la conférence</a>
            {% endif %}
            </td>
        </tr>
        {% endif %}

       {% for conference in conferences|from_period:period %}
        {% for stream in conference.livestream.all %}
         {% if stream.stream_type == 'webm' %}
            <tr>
            {% if stream.streaming %}
            <td {% if forloop.first %}class="border-top"{% endif %} width="230px">
               <a href="{% url teleforma-conference-detail period.id stream.conference.id %}" title="{% trans "View" %}">
               <img id="snapshot-{{ stream.course.code }}-{{ stream.course_type }}" src="{{ stream.snapshot_url }}" width="100%" alt="{% trans 'Click here' %}" />
               </a>
            </td>
            <td {% if forloop.first %}class="border-top"{% endif %} width="60%" style="padding-left: 1em;">
                <div>
                    <dl class="listing" style="font-size: 1.2em;">
                    <dt>{% trans "Title" %}</dt><dd>{{ stream.conference.course.title }}</dd>
                    <dt>{% trans "Session" %}</dt><dd>{{ stream.conference.session }}</dd>
                    {% if stream.conference.professor.user.username %}
                    <dt>{% trans "Professor" %}</dt><dd><a href="{% url telemeta-profile-detail stream.conference.professor.user.username %}" target="_blank">{{ stream.conference.professor }}</a></dd>
                    {% endif %}
                    <dt>{% trans "Begin" %}</dt><dd>{{ stream.conference.date_begin }}</dd>
                    </dl>
                 </div>
            </td>
            <td {% if forloop.first %}class="border-top"{% endif %} width="10%" align="center">
                {% if stream.streaming %}
                <img src="/static/teleforma/images/network-wireless.png" style="vertical-align:middle" title="streaming" />
                <img src="/static/telemeta/images/media-record.png" style="vertical-align:middle" title="recording" />
              {% endif %}
            </td>
            {% else %}
            <div style="padding-left: 1em;">

            </div>
             {% endif %}
            </tr>
            {% endif %}
        {% endfor %}
        {% endfor %}
    </tbody>
    </table>
</div>
{% endif %}
